{"componentChunkName":"component---src-templates-article-page-js","path":"/blog/implement-rich-snippet-schema-with-google-tag-manager/","webpackCompilationHash":"ba49793154015d67d217","result":{"data":{"markdownRemark":{"id":"f715d370-396f-57ac-9c6c-54e5cdb80459","html":"<p>Rich Snippets Schema, while may not help in improving SERP Ranking, it does help in better CTR(Click Through Rate). And this is the new frontier in Digital Marketing/SEO. With the onset of various AI Assistants like <em>Google Assistant</em>, <em>Siri</em>, <em>Cortana</em> etc and them affecting sales, It has become very important that the search engines understand your content better. To make them understand the content better, a lot of search giants got together and developed a content markup system. This is Project <strong><em>Schema.org</em></strong>.</p>\n<p>There are various encodings you can use to markup your data, like <code>Microdata</code>, <code>JSON-LD</code>, <code>RDFa</code>. But out of these the popular choices are <code>Microdata</code> and <code>JSON-LD</code>. <code>Microdata</code> is very much like <code>XML</code> whereas <code>JSON-LD</code> is more like <code>JSON</code>. Google prefers <code>JSON-LD</code> and plans to phase out <code>Microdata</code>. But <code>Microdata</code> is still a big part of Bing and Yahoo.</p>\n<p>Although there are various ways you can implement these Schemas, the one that has been gaining a lot of traction recently is using <em>Google Tag Manager</em>. While you can simply put your JSON-LD schema Tag in a Custom HTML field and expect it to work, and for some people it has, if you go to <a href=\"https://search.google.com/structured-data/testing-tool/\">Structured Data Testing Tool</a> you'll find out that the schema isn't visible. That's either because Structured Data Testing Tool cannot render the schema, or GTM doesn't allow us to do so.</p>\n<p>This made us think and we found a simple workaround for this problem. What we do essentially is, store schema data as <code>JSON</code> in a variable, and create a <code>&#x3C;script type=\"application/ld+json\">&#x3C;/script></code> tag using JavaScript.</p>\n<p>Let's say this is our <code>JSON-LD</code> Schema</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">&lt;script type=<span class=\"token string\">\"application/ld+json\"</span>>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"@context\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://schema.org/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"@type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Review\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.example.com/lorem-services/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Example Lorem Service Review\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"reviewBody\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Sed posuere consectetur est at lobortis. Cras mattis consectetur purus sit amet fermentum.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"datePublished\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2017-06-27\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"itemReviewed\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Service\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Lorem Service\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Person\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"John Smith\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"reviewRating\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Rating\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"worstRating\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ratingValue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"bestRating\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n&lt;/script></code></pre></div>\n<p>First we create a Custom HTML Tag in Google Tag Manager. In that tag we create a JavaScript <code>document function</code> within a Script Tag. In that <code>function</code>, we create variable called <code>jsonld</code> , which stores our <code>JSON-LD</code> data.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> jsonld <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"@context\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://schema.org/\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Review\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.example.com/lorem-services/\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Example Lorem Service Review\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"reviewBody\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Sed posuere consectetur est at lobortis. Cras mattis consectetur purus sit amet fermentum.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"datePublished\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2017-06-27\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"itemReviewed\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Service\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Lorem Service\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Person\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"John Smith\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"reviewRating\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Rating\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"worstRating\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ratingValue\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"bestRating\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Then we initalize the Script element, set the type as <code>\"application/ld+json\"</code>, and put the <code>jsonld</code> variable data in the  <code>Inner HTML</code>. After that all that's left is to append the script to document Head.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> jsonld <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"@context\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://schema.org/\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Review\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://www.example.com/lorem-services/\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Example Lorem Service Review\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"reviewBody\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Sed posuere consectetur est at lobortis. Cras mattis consectetur purus sit amet fermentum.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"datePublished\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2017-06-27\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"itemReviewed\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Service\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Lorem Service\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Person\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"John Smith\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"reviewRating\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"@type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Rating\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"worstRating\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ratingValue\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"bestRating\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'application/ld+json'</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span> jsonld <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Oh and don't forget to check the box that says <em>Support <code>document.write</code></em>.\nSince we are done with the coding part, all that is left is to set the trigger, which can be done easily by creating a new trigger and setting the required path, depending on if you want it to trigger on specific pages or all pages.</p>\n<p><strong>TIP:</strong> You can set custom variables in GTM that'll pull the data according to <code>CSS selectors</code>, this can be used to make an automated template schema, for pages like blog posts.</p>","fields":{"slug":"/blog/implement-rich-snippet-schema-with-google-tag-manager/"},"frontmatter":{"date":"June 16, 2018","title":"Implement Rich Snippet Schema with Google Tag Manager","cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIFAf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAF6aSB0jkf/xAAbEAABBQEBAAAAAAAAAAAAAAABAAIDBBIhMf/aAAgBAQABBQJu3WCeMtkDxSynC//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AVf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIAEBESISL/2gAIAQEABj8C5A+Q0aHWphnZJXa//8QAGhAAAwEBAQEAAAAAAAAAAAAAAAEhEUFRYf/aAAgBAQABPyFFat37TOGd03ib3waVJEgQiRGn/9oADAMBAAIAAwAAABCDL//EABcRAAMBAAAAAAAAAAAAAAAAAAABQXH/2gAIAQMBAT8Qbpg//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QI//EABsQAQADAQADAAAAAAAAAAAAAAEAESExQWGR/9oACAEBAAE/EKeWfkbXHntR0oCWTgBrz1Ahk0W2TIRetFXBMC3qij7fJYn/2Q==","aspectRatio":1.5,"src":"/blog/static/7a92033acc84c584995e45e829fa146d/1511b/structured_data_gtm.jpg","srcSet":"/blog/static/7a92033acc84c584995e45e829fa146d/79e64/structured_data_gtm.jpg 269w,\n/blog/static/7a92033acc84c584995e45e829fa146d/b1729/structured_data_gtm.jpg 538w,\n/blog/static/7a92033acc84c584995e45e829fa146d/1511b/structured_data_gtm.jpg 1075w,\n/blog/static/7a92033acc84c584995e45e829fa146d/57d19/structured_data_gtm.jpg 1613w,\n/blog/static/7a92033acc84c584995e45e829fa146d/ede7d/structured_data_gtm.jpg 2150w,\n/blog/static/7a92033acc84c584995e45e829fa146d/cd3db/structured_data_gtm.jpg 6702w","sizes":"(max-width: 1075px) 100vw, 1075px"}},"publicURL":"/blog/static/structured_data_gtm-7a92033acc84c584995e45e829fa146d.jpg"},"meta_title":"Implement Rich Snippet JSON LD Schema with Google Tag Manager","meta_description":"Leverage Google Tag Manager Custom HTML Tag to implement Schema.org JSON-LD Schema for Rich Snippets.","tags":["Schema","RichSnippet","SEO","GoogleTagManager","JSONLD"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"f715d370-396f-57ac-9c6c-54e5cdb80459"}}}