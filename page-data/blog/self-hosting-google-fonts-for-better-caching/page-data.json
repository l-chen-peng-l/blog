{"componentChunkName":"component---src-templates-article-page-js","path":"/blog/self-hosting-google-fonts-for-better-caching/","webpackCompilationHash":"0aef3b7d25e0eca4e3b9","result":{"data":{"markdownRemark":{"id":"9fff63e0-2905-5b14-85ef-9e994d4ca7bb","html":"<p>Just a month ago a college fresher came to me showing her newly made React app, bootstrapped using <code>create-react-app</code>. As we got into discussing performance, she told me that everything was almost 100 on <a href=\"https://gtmetrix.com/\">gtmetrix.com</a> except for <strong>Browser Caching</strong>. That was because of <em>Google Analytics</em> and <em>Google Fonts</em>. And, it's not just about browser caching, a lot of times <em>Google Fonts</em> have files that will probably be of no use to us. For example, extra language support. Although, not much can be done about <em>Google Analytics</em>, I told her a little hack that will make the <em>Google Fonts</em> problem disappear very easily. Since, starter kits like <code>create-react-app</code> and <em>Gatsby JS</em> provide support for caching and service workers, we're better off self hosting.</p>\n<p>For this tutorial, we'll be assuming the following:</p>\n<ul>\n<li>This is a <code>create-react-app</code> project</li>\n<li>We need to include Montserrat font from <em>Google Fonts</em>.</li>\n</ul>\n<p>Let's begin, by selecting the font on <a href=\"https://fonts.google.com\">https://fonts.google.com</a> for us that will be <em>Montserrat</em>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 2048px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b19fe4719c2221e086d710b56e94fa29/ed68f/screenshot-2018-12-05-at-9.58.11-pm.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.32344213649851%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADHUlEQVQ4y22SS09TQRTHLxse38DEb2AkxoU7GuWqOyHuwGJqqNBXIKQXRBcQoNyWR1ukbwsGCAtXbGgrMSExxLhjpXvD25bS6Qvow9t7j+cMApp4k1/OzNyZ/5xz/iM8vnf3xtMnOqlD3zHY3t4m6e7rpJf6Tknf2SH1mnolq80qmcwmyYyYcG6xmCXDC4PUKj6QdLoWqQXRdz2zdz7reCOKrW2C4XnXI1l2gCxPgtMpg9PlBPfsLMwiHq8HvF4veDwecLvd4Pa4+frUlAscDgdMTExwnE4n3zc4OPhZsFptYjAYUsPhsEJEIhHlckyEQiElGo0qS0tLnOXlZR5XVlauwLXK6uoqXRZDQas4NzcHMzMzdIvm9/s5Pp+PEwwGtbGxMa23p0czmUya0Wi8prtbMxoMmqFLX3v9aogEE4LZbBbxIKAIoQUCASBQ6Ar6RzESCoFvfh58OKczRMAfgPBbf+39uyi2YiohWCwWcR430QEs70qQekLr1LOtrS2AWu2C/381ls/A+Ph4Qujv7xfp0OjoKExOTmqyLAP2EaanpzkT2PyP6+ugnp7Cr1IJlGoVFBRWFAU0VYPj4jF82f9a+/bjOzgdckLo6+sTKZuBgQEYGhrSUBTQDO4sXUQXxONxSCeTUMjloFqpQqVcgQrFSoXPKcPMSQaw1wluymVpiEYGYencJBIbGRmBeCwG5VwesukUZHNpYAUG2UIGqMxM7gSFy7WjoyN6QtcZSpIEdrtdo3dFJV9mSG9sY2MDhXKQZmlIZ4/hmKV4TGWSkEr/hPPzs9rBwcGFoM1m44Iul0tFl1TMTEWDeKQ1LEONxWJqsVBAiiqWqpZKZRXLVrFUVdOAopLEluDeOLn8kDJaXFwEfMCwsLDAo//P00BR2NzchCqakc/noVgsQqFQgLPzM+xfBZRyGWVVYIyRqZ8EvV7fgnYzzC6LhxmBYw66zLAMtra2xg4PD9nOzg7b29tju7u7bAfZx3ESYzaVOtne3q4ODw9/EPBrQm7V1dU1/w2u/UNTUxOnsbHxalyPY6GhoVmor7+Ne+4gN38DPsPat+A0zjMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"self-hosting-google-fonts-1\"\n        title=\"self-hosting-google-fonts-1\"\n        src=\"/static/b19fe4719c2221e086d710b56e94fa29/12f40/screenshot-2018-12-05-at-9.58.11-pm.png\"\n        srcset=\"/static/b19fe4719c2221e086d710b56e94fa29/c5a17/screenshot-2018-12-05-at-9.58.11-pm.png 512w,\n/static/b19fe4719c2221e086d710b56e94fa29/3b243/screenshot-2018-12-05-at-9.58.11-pm.png 1024w,\n/static/b19fe4719c2221e086d710b56e94fa29/12f40/screenshot-2018-12-05-at-9.58.11-pm.png 2048w,\n/static/b19fe4719c2221e086d710b56e94fa29/ed68f/screenshot-2018-12-05-at-9.58.11-pm.png 2696w\"\n        sizes=\"(max-width: 2048px) 100vw, 2048px\"\n      />\n  </a>\n    </span></p>\n<p>Next, we copy the URL in the href attribute of the example code. Open the URL from your browser and you'll see a css file, with the code to include the font-face.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 2048px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1077014480686c3edc9b0d666a5b9402/ed68f/screenshot-2018-12-05-at-9.59.21-pm.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.32344213649851%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOUlEQVQ4y6WS224SURSGJ9z5ACZNrNqaeChW28QDmrS1UOqdT9H4AG5vfAOS3tXYi6ZA08GIQ+BGDfHKx4CEUwLIKaYc5jzMDMu19jAUvbBGSb6svfZs/vnXv0e4s3B5YX11kT0IPXwdDK6w5WuL7MnTEOdx6BHbDm+z3edRFt3d4TUcCbOtZ5vs1u2bbPnGEru+dJUF76682tzaeLO2fv+F8HJvL7q/H4ODtwdwePgOkkdHcHKShGQyCcfxY4gn4pBIJOBUPOWk02mQJAlS71OQSokg4l4cz0nSR4jFYt+EfD4f+d5qud1O1zZN0waAf8FEQFXVT0Imk4nUajXodDowHA4nsixzFEWZjEajWU9rTdMm9tiejMdjD8vDMi2HBFut1hchm81GKpUKNBoNLmjbNjiOA351XRdM2wRjrHN0S+NopuphqKAaChdsd9rngvV6Hfr9/gRFAd2QOAwGA9B1nf9J0WRQdHlWUYRXGXtZHZ0L5nK5SLlc5oI0lu/qQhwPOu/YDhfsdrueQxLzMyR3mBl3h44BcwPLssAwDMBL49UwDa8i9BzhgqjhOSwWi1CtVkmEwp5lSPzJ5dy5Xx3ShfR6vZlDghxSjj7U/75PDnnGU4ft9vRSSqUSNJtNF0d0cTwX3+iiUw6t/X5+f/6ZTTY9h59p5B0UI/VZXjS2nxut/Z4yJObX5BA/aJhm+FUQRXEDBc9w5D5yhm/5a+j8lB+IVSgUPgj4uxQIBIJY7/0Hq8gacuUnLeeHd+6iRFQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"self-hosted-google-fonts-2\"\n        title=\"self-hosted-google-fonts-2\"\n        src=\"/static/1077014480686c3edc9b0d666a5b9402/12f40/screenshot-2018-12-05-at-9.59.21-pm.png\"\n        srcset=\"/static/1077014480686c3edc9b0d666a5b9402/c5a17/screenshot-2018-12-05-at-9.59.21-pm.png 512w,\n/static/1077014480686c3edc9b0d666a5b9402/3b243/screenshot-2018-12-05-at-9.59.21-pm.png 1024w,\n/static/1077014480686c3edc9b0d666a5b9402/12f40/screenshot-2018-12-05-at-9.59.21-pm.png 2048w,\n/static/1077014480686c3edc9b0d666a5b9402/ed68f/screenshot-2018-12-05-at-9.59.21-pm.png 2696w\"\n        sizes=\"(max-width: 2048px) 100vw, 2048px\"\n      />\n  </a>\n    </span></p>\n<p>We see here that there are quite a few font files that the api pulled. Let's say for the purpose of this article that we don't need the Vietnamese support. So, we just copy the Latin and Cyrillic parts of the stylesheet. In the code, we see, there's a URL for the font file. We download the fonts using that URL and keep them in a local project folder. Now, all we need to do is replace the url from the cloud hosted to the relative address of the locally stored file.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">src</span><span class=\"token punctuation\">:</span> <span class=\"token function\">local</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Montserrat Regular'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">local</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Montserrat-Regular'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token url\">url(https://fonts.gstatic.com/s/montserrat/v12/JTUSjIg1_i6t8kCHKm459WlhyyTh89Y.woff2)</span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'woff2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>to</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">src</span><span class=\"token punctuation\">:</span> <span class=\"token function\">local</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Montserrat Regular'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">local</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Montserrat-Regular'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token url\">url(../fonts/JTUSjIg1_i6t8kCHKm459WlhyyTh89Y.woff2)</span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'woff2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code>create-react-app</code> allows us to directly import css files, we just import our stylesheet in the javascript.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">...</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./styles.css'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And, that's all we need to do, <code>create-react-app</code> automatically takes care of caching and service worker. This works for other package like <em>Gatsby JS</em> as well.\nThat's all for this article.</p>","fields":{"slug":"/blog/self-hosting-google-fonts-for-better-caching/"},"frontmatter":{"date":"December 05, 2018","title":"Self hosting Google Fonts for better caching","cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAeCk8sSCv//EABYQAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAQABBQKRiorX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERITFRQWFx/9oACAEBAAE/IUuNkpzXYl8Fk/YKzGhsf//aAAwDAQACAAMAAAAQnN//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCn/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qh//EAB0QAQADAAEFAAAAAAAAAAAAAAEAESGBMVFhcdH/2gAIAQEAAT8QA1rz0iooCGgbU7/gR2XWnCGuxSqn19YxtZ//2Q==","aspectRatio":1.7777777777777777,"src":"/static/393cfd1fb12c311836e475c7c6a85ec4/1511b/self_hosted_google_fonts.jpg","srcSet":"/static/393cfd1fb12c311836e475c7c6a85ec4/79e64/self_hosted_google_fonts.jpg 269w,\n/static/393cfd1fb12c311836e475c7c6a85ec4/b1729/self_hosted_google_fonts.jpg 538w,\n/static/393cfd1fb12c311836e475c7c6a85ec4/1511b/self_hosted_google_fonts.jpg 1075w,\n/static/393cfd1fb12c311836e475c7c6a85ec4/57d19/self_hosted_google_fonts.jpg 1613w,\n/static/393cfd1fb12c311836e475c7c6a85ec4/ede7d/self_hosted_google_fonts.jpg 2150w,\n/static/393cfd1fb12c311836e475c7c6a85ec4/0e73f/self_hosted_google_fonts.jpg 4608w","sizes":"(max-width: 1075px) 100vw, 1075px"}},"publicURL":"/static/self_hosted_google_fonts-393cfd1fb12c311836e475c7c6a85ec4.jpg"},"meta_title":"Leverage self hosted Google Fonts for better caching","meta_description":"Self host google fonts to better leverage the browser caching provided by starter kit like create-react-app and Gatsby.","tags":["Caching","Fonts","ServiceWorker"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"9fff63e0-2905-5b14-85ef-9e994d4ca7bb"}}}